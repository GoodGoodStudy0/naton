(function(a, b) {
  function c(b, c) {
    var d = b.find(".toolbar");
    var g = d.find(".left");
    var h = d.find(".right");
    h.click(function() {
      if (!b.hasClass("DuringAnimation")) {
        b.addClass("DuringAnimation");
        setTimeout(function() {
          b.removeClass("DuringAnimation")
        }, 500);
        if (c.actSlide >= 0) {
          var d = null;
          var i = c.actSlide;
          var j = b.parent().find("ul:first >li .slide");
          for (var k = 0; k < j.length; k++) {
            i++;
            if (i == j.length)
              i = 0;
            var l = b.parent().find("ul:first >li").eq(i).find(".slide").data("pagemore");
            if (d == null && l.length > 0)
              d = b.parent().find("ul:first >li").eq(i).find(".slide")
          }
          if (d != null) {
            b.parent().find(".page-more").css({left: "0px"}).addClass("page-more-old").removeClass("page-more");
            b.parent().find(".page-more-old").cssAnimate({left: -150 + "px",opacity: 0}, {duration: 300,queue: false});
            e(d, c, 1);
            setTimeout(function() {
              b.parent().find(".page-more-old").remove()
            }, 500)
          }
        }
        if (c.maxitem > c.slideAmount) {
          if (parseInt(b.find("ul:first >li .slide:first-child").data("id"), 0) != c.slideAmount && c.carousel == "off" || c.carousel != "off") {
            g.css({display: "block"});
            b.find("ul:first >li .slide").each(function() {
              var b = a(this);
              b.data("id", b.data("id") - 1);
              if (b.data("id") < 0)
                b.data("id", c.maxitem - 1)
            });
            f(b, c, 0);
            if (parseInt(b.find("ul:first >li .slide:first-child").data("id"), 0) == c.slideAmount && c.carousel == "off")
              h.css({display: "none"})
          }
        }
      }
    });
    g.click(function() {
      if (!b.hasClass("DuringAnimation")) {
        b.addClass("DuringAnimation");
        setTimeout(function() {
          b.removeClass("DuringAnimation")
        }, 500);
        if (c.actSlide >= 0) {
          var d = null;
          var i = c.actSlide;
          var j = b.parent().find("ul:first >li .slide");
          for (var k = 0; k < j.length; k++) {
            i--;
            if (i == -1)
              i = j.length - 1;
            var l = b.parent().find("ul:first >li").eq(i).find(".slide").data("pagemore");
            if (d == null && l.length > 0)
              d = b.parent().find("ul:first >li").eq(i).find(".slide")
          }
          if (d != null) {
            b.parent().find(".page-more").css({left: "0px"}).addClass("page-more-old").removeClass("page-more");
            b.parent().find(".page-more-old").cssAnimate({left: 150 + "px",opacity: 0}, {duration: 300,queue: false});
            e(d, c, 2);
            setTimeout(function() {
              b.parent().find(".page-more-old").remove()
            }, 500)
          }
        }
        if (c.maxitem > c.slideAmount) {
          if (parseInt(b.find("ul:first >li .slide:first-child").data("id"), 0) != 0 && c.carousel == "off" || c.carousel != "off") {
            h.css({display: "block"});
            b.find("ul:first >li .slide").each(function() {
              var b = a(this);
              b.data("id", b.data("id") + 1);
              if (b.data("id") == c.maxitem)
                b.data("id", 0)
            });
            f(b, c, 1);
            if (parseInt(b.find("ul:first >li .slide:first-child").data("id"), 0) == 0 && c.carousel == "off")
              g.css({display: "none"})
          }
        }
      }
    })
  }
  function d(a, b) {
    var c = a.topcontainer.find(".toolbar");
    if (b == "none") {
      c.css({visibility: "hidden"})
    } else {
      c.css({visibility: "visible"})
    }
  }
  function e(b, c, e) {
    var f = a(this);
    d(c, "visible");
    c.top.animate({top: c.height * 1.5 + "px"}, {duration: 500,queue: false});
    c.actSlide = b.parent().index();
    c.top.parent().find(".page-more").remove();
    c.top.parent().append('<div class="page-more" style="position:absolute;z-index:9999;width:' + c.width + "px;height:" + c.height + 'px">' + b.data("pagemore") + "</div>");
    var g = c.top.parent().find(".page-more");
    g.css({visibility: "visible"});
    if (e == 2) {
      g.css({left: "-150px",opacity: "0.0"});
      g.animate({left: "0px",opacity: "1.0"}, {duration: 500,queue: false})
    } else {
      if (e == 1) {
        g.css({left: "150px",opacity: "0.0"});
        g.animate({left: "0px",opacity: "1.0"}, {duration: 500,queue: false})
      } else {
        g.css({top: 0 - c.height * 1.5 + "px"});
        g.animate({top: "0px"}, {duration: 500,queue: false})
      }
    }
    g.parent().css({overflow: "visible"});
    c.top.parent().find(".page-more").find(".closer").click(function() {
      var b = a(this).closest(".page-more");
      c.top.animate({top: "0px"}, {duration: 500,queue: false});
      b.animate({top: 0 - c.height + "px"}, {duration: 500,queue: false});
      setTimeout(function() {
        b.remove()
      }, 500);
      b.parent().css({overflow: "hidden"});
      c.actSlide = -1;
      if (c.maxitem <= c.slideAmount)
        d(c, "none")
    });
    if (c.callBack != null) {
      c.callBack.call()
    }
  }
  function f(b, c, d) {
    var e = 0 - (c.slidewidths + c.slideSpacing) + c.slideSpacing;
    var f = (c.slidewidths + c.slideSpacing) * c.slideAmount + c.slideSpacing;
    c.transition = 1;
    b.find("ul:first >li .slide").each(function(b) {
      var g = a(this);
      if (d == 0) {
        if (g.data("id") == c.maxitem - 1) {
          g.cssAnimate({left: 1 * e + "px"}, {duration: 300,queue: false})
        } else {
          if (g.position().left < 0) {
            g.cssAnimate({left: f + "px"}, {duration: 1})
          } else {
            setTimeout(function() {
              g.cssAnimate({left: c.positionArray[g.data("id")] + "px"}, {duration: 300,queue: false})
            }, 100)
          }
        }
      } else {
        if (g.data("id") == c.slideAmount) {
          g.cssAnimate({left: f + "px"}, {duration: 500,queue: false})
        } else {
          if (g.position().left >= c.positionArray[c.maxitem - 1]) {
            g.cssAnimate({left: e + "px"}, {duration: 2})
          }
          setTimeout(function() {
            g.cssAnimate({left: c.positionArray[g.data("id")] + "px"}, {duration: 300,queue: false})
          }, 100)
        }
      }
    })
  }
  function g(c, f) {
    f.slidewidths = (f.width - (f.slideAmount - 1) * f.slideSpacing) / f.slideAmount;
    f.positionArray = [];
    f.positionArray[0] = 0 - f.slidewidths;
    f.maxitem = 0;
    c.find("ul:first > li").each(function(c) {
      f.maxitem = f.maxitem + 1;
      var d = a(this);
      f.positionArray[c] = (f.slidewidths + f.slideSpacing) * c;
      d.wrapInner('<div class="slide" style="position:absolute;overflow:hidden;'+ "top:0px;left:" + f.positionArray[c] + 'px;"></div>');
      var g = d.find(".slide");
      g.css({left: f.positionArray[c] + "px",position: "absolute"});
      g.data("pagemore", "");
      g.find(".page-more").each(function() {
        var b = a(this);
        if (g.find(".morebutton").length > 0) {
          if (g.find(".morebutton").attr("href").length > 1)
            g.data("link", true)
        }
        g.data("pagemore", b.html());
        b.remove();
        g.find(".morebutton").click(function() {
          if (a(this).attr("href") == "#" || a(this).attr("href").length == 0) {
            e(g, f);
            return false
          }
        })
      });
      g.data("id", c);
      var h = g.find("img");
      h.wrap('<div class="imgholder" style="cursor:pointer;position:relative"></div>');
      var i = g.find(".imgholder");
      var j = parseInt(h.css("border-left-width"), 0);
      var k = parseInt(h.css("paddingLeft"), 0);
      var l = parseInt(h.css("marginLeft"), 0);
      if (!j > 0)
        j = 0;
      if (!k > 0)
        k = 0;
      if (!l > 0)
        l = 0;
      var m = j + k + l;
      var n = parseInt(h.css("border-top-width"), 0);
      var o = parseInt(h.css("paddingTop"), 0);
      var p = parseInt(h.css("marginTop"), 0);
      if (!n > 0)
        n = 0;
      if (!o > 0)
        o = 0;
      if (!p > 0)
        p = 0;
      var q = n + o + p;
      i.append('<img class="bw" src="' + h.data("bw") + '">');
      i.find(".bw").css({position: "absolute","z-index": "1000",opacity: "0.0",left: m + "px",top: q + "px"});
      if (g.data("pagemore").length > 0)
        g.find(".imgholder").click(function() {
          if (g.find(".morebutton").attr("href") == "#" || g.find(".morebutton").attr("href").length == 0) {
            e(g, f);
            return false
          } else {
            var a = "_top";
            if (g.find(".morebutton").attr("target") != b)
              a = g.find(".morebutton").attr("target");
            window.open(g.find(".morebutton").attr("href"), a)
          }
        });
      if (f.hovereffect == "on") {
        g.hover(function() {
          var b = a(this);
          var c = b;
          var d = c.find(".imgholder");
          d.css({overflow: "hidden"});
          b.addClass("mouseover");
          if (c.data("link") == true) {
            if (c.find(".hover-blog-link-sign").length == 0) {
              d.append('<div class="hover-blog-link-sign" style="z-index:999;margin-left:-25px;margin-top:-25px"></div>');
              var e = c.find(".hover-blog-link-sign");
            } else {
              var e = c.find(".hover-blog-link-sign");
              clearTimeout(e.data("out"))
            }
          } else {
            if (c.find(".hover-more-sign").length == 0) {
              d.append('<div class="hover-more-sign"></div>');
              var e = c.find(".hover-more-sign");
            } else {
              var e = c.find(".hover-more-sign");
              clearTimeout(e.data("out"))
            }
          }
          e.data("item", c);
          b.parent().parent().find("li").each(function(b) {
            var c = a(this);
            if (!c.find(".slide").hasClass("mouseover")) {
              c.find(".slide .imgholder .bw").stop();
              c.find(".slide *").stop();
              c.find(".slide .imgholder .bw").animate({opacity: "1.0"}, {duration: 400,queue: false});
              if (a.browser.msie && a.browser.version < 8) {
              } else {
                c.find(".slide *").each(function() {
                  var b = a(this);
                  if (f.hoverAlpha == "on") {
                    if (!b.hasClass("buttonlight") && !b.hasClass("imgholder"))
                      b.animate({opacity: "0.5"}, {duration: 400,queue: false});
                    if (b.hasClass("thumb"))
                      b.animate({opacity: "0.0"}, {duration: 400,queue: false})
                  }
                })
              }
              clearTimeout(c.data("to"))
            } else {
              clearTimeout(c.data("to"));
              c.find(".slide .imgholder .bw").stop();
              c.find(".slide *").stop();
              c.find(".slide  .imgholder .bw").animate({opacity: "0.0"}, {duration: 400,queue: false});
              if (a.browser.msie && a.browser.version < 8) {
              } else {
                c.find(".slide *").each(function() {
                  var b = a(this);
                  if (f.hoverAlpha == "on") {
                    if (!b.hasClass("buttonlight") && !b.hasClass("imgholder") && !b.hasClass("bw"))
                      b.animate({opacity: "1.0"}, {duration: 400,queue: false})
                  }
                })
              }
            }
          })
        }, function() {
          var b = a(this);
          var c = b;
          var d = c.find(".imgholder");
          if (b.data("link") == true)
            var e = c.find(".hover-blog-link-sign");
          else
            var e = c.find(".hover-more-sign");
          e.cssStop(true, true);
          e.data("out", setTimeout(function() {
            b.find(".hover-blog-link-sign").remove();
            b.find(".hover-more-sign").remove()
          }, 300));
          b.removeClass("mouseover");
          b.parent().parent().find("li").each(function(b) {
            var c = a(this);
            c.data("to", setTimeout(function() {
              c.find(".slide .imgholder .bw").stop();
              c.find(".slide *").stop();
              c.find(".slide .imgholder .bw").animate({opacity: "0.0"}, {duration: 400,queue: false});
              if (a.browser.msie && a.browser.version < 8) {
              } else {
                c.find(".slide *").each(function() {
                  var b = a(this);
                  if (!b.hasClass("buttonlight") && !b.hasClass("imgholder") && !b.hasClass("bw"))
                    b.animate({opacity: "1.0"}, {duration: 400,queue: false})
                })
              }
            }, 250))
          })
        })
      }
    });
    f.positionArray[f.maxitem + 1] = (f.slidewidths + f.slideSpacing) * (f.maxitems + 1) + f.slideSpacing;
    d(f, "visible");
    if (f.maxitem <= f.slideAmount)
      d(f, "none");
    c.find("ul:first").css({visibility: "visible"})
  }
  function i(b, c) {
    if (a.browser.msie) {
      b.find(".paradigm-preloader").animate({opacity: "0.0"}, {duration: 300,queue: false})
    } else {
      b.find(".paradigm-preloader").animate({opacity: "0.0"}, {duration: 300,queue: false})
    }
    setTimeout(function() {
      b.find(".paradigm-preloader").remove()
    }, 300)
  }
  function j(a, b) {
    setInterval(function() {
    }, 100)
  }
  a.fn.extend(
    {services: function(b) {
    var d = {slideAmount: 5,slideSpacing: 20,touchenabled: "on",transition: 1,mouseWheel: "on",slideshow: 1e3,hovereffect: "on",callback: null};
    b = a.extend({}, a.fn.services.defaults, b);
    return this.each(function() {
      var d = b;
      var e = a(this);
      d.topcontainer = e;
      h(e, d);
      g(e, d);
      c(e, d);
      if (d.timer > 0)
        j(e, d);
      if (d.touchenabled == "on")
        e.wipetouch({wipeLeft: function() {
          var a = e.find(".toolbar");
          var b = a.find(".right");
          b.click()
        },wipeRight: function() {
          var a = e.find(".toolbar");
          var b = a.find(".left");
          b.click()
        }});
      if (d.mouseWheel == "on") {
        e.bind("mousewheel", function(b, c) {
          var d = a(this);
          var e = d.find(".toolbar");
          var f = e.find(".left");
          var g = e.find(".right");
          clearTimeout(d.data("mw"));
          if (c < 0)
            d.data("mw", setTimeout(function() {
              g.click()
            }, 100));
          else
            d.data("mw", setTimeout(function() {
              f.click()
            }, 100));
          return false
        })
      }
      e.hover(function() {
        var b = a(this);
        b.addClass("nowIsOver")
      }, function() {
        var b = a(this);
        b.removeClass("nowIsOver")
      });
      if (d.slideshow > 0)
        setInterval(function() {
          var a = e.find(".toolbar");
          var b = a.find(".left");
          var c = a.find(".right");
          if (!e.hasClass("nowIsOver") && !(d.actSlide >= 0))
            c.click()
        }, d.slideshow)
    })
  }});
})(jQuery)
